!function(e){function u(t,n,r){return function(i,s,o){var u=[];return this.each(function(){var a=e(this).data(n);if(typeof i=="string"){if(typeof a=="undefined")throw new Error(n+" not defined");switch(i){case"enable":a.enable();break;case"disable":a.disable();break;case"destroy":a.destroy(),e(this).removeData(n);break;case"option":o!==undefined?a.opts[s]=o:typeof s=="object"?a.opts=e.extend(a.opts,s):s?u.push(a.opts[s]):u.push(a.opts);break;case"refresh":if(n!=="sortable")return;a.element.find(a.opts.items).prop("draggable",!0);break;case"toArray":if(n!=="sortable")return;u.push(a.toArray(s))}}else{if(a)return this;a=new t(e(this),e.extend({},r,i)),a.create(),e(this).data(n,a)}}),u.length?u.length===1?u[0]:u:this}}var t=0,n=function(){this.eventHandler=e("<div />"),this.origin=this.el=null;var t;Object.defineProperty(this,"placeholder",{get:function(){return t},set:function(e){if(t===e)return;t&&t.remove(),t=e}})};n.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},n.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},n.prototype.start=function(e,t){return this.origin=e,this.el=t,this.eventHandler.trigger("start"),this.el},n.prototype.stop=function(){this.origin=this.el=this.placeholder=null,this.eventHandler.trigger("stop")};var r=e.dragging=parent.$.dragging||new n,i=function(n,r){this.id=t++,this.el=e(n),this.opts=r,this.cancel=r.handle!==!1,this.connectWith=[];var i=this;if(this.opts.connectToSortable){var s=e(this.opts.connectToSortable),o=window;s[0].ownerDocument!==document&&(o=s[0].ownerDocument.defaultView),o.$(this.opts.connectToSortable).each(function(){var e=o.$(this),t=e.data("sortable");t?t.connectWith.push(i.id):e.one("create",function(e,t){t.connectWith.push(i.id)})})}};i.prototype.create=function(){this.el.on("dragstart",e.proxy(this.start,this)).on("dragend",e.proxy(this.end,this)).prop("draggable",!0),this.el.on("mouseenter",this.opts.cancel,e.proxy(this.disable,this)).on("mouseleave",this.opts.cancel,e.proxy(this.enable,this)),this.opts.handle&&this.el.on("mouseenter",this.opts.handle,e.proxy(this.enable,this)).on("mouseleave",this.opts.handle,e.proxy(this.disable,this));var t=this;setTimeout(function(){t.el.trigger("create",t)})},i.prototype.destroy=function(){this.el.off("dragstart",this.start).off("dragend",this.end).prop("draggable",!1),this.el.off("mouseenter",this.opts.cancel,this.disable).off("mouseleave",this.opts.cancel,this.enable),this.opts.handle&&this.el.off("mouseenter",this.opts.handle,this.enable).off("mouseleave",this.opts.handle,this.disable)},i.prototype.enable=function(){this.opts.disabled=!1},i.prototype.disable=function(){this.opts.disabled=!0},i.prototype.start=function(e){if(this.opts.disabled)return!1;e.originalEvent&&(e=e.originalEvent),e.dataTransfer.effectAllowed="copy";try{e.dataTransfer.setData("text/plain","42")}catch(e){}r.start(this,this.el).addClass("dragging")},i.prototype.end=function(e){e.stopPropagation(),e.preventDefault();if(!r.el)return;this.el.removeClass("dragging"),r.stop()};var s=function(n,r){this.id=t++,this.el=e(n),this.opts=r,this.accept=!1};s.prototype.create=function(){this.el.on("dragover",e.proxy(this.over,this)).on("dragenter",e.proxy(this.enter,this)).on("dragleave",e.proxy(this.leave,this)).on("drop",e.proxy(this.drop,this)),r.on("start",e.proxy(this.activate,this)).on("stop",e.proxy(this.reset,this));var t=this;setTimeout(function(){t.el.trigger("create",t)})},s.prototype.destroy=function(){this.el.off("dragover",this.over).off("dragenter",this.enter).off("dragleave",this.leave).off("drop",this.drop)},s.prototype.enable=function(){this.opts.disabled=!1},s.prototype.disable=function(){this.opts.disabled=!0},s.prototype.activate=function(e){this.accept=!1;var t=this.opts.accept==="*"||(typeof this.opts.accept=="function"?this.opts.accept(r.el):r.el.is(this.opts.accept));this.opts.scope!=="default"?(this.accept=r.origin.opts.scope===this.opts.scope,!this.accept&&this.opts.accept!=="*"&&(this.accept=t)):this.accept=t;if(!this.accept)return;this.opts.activeClass&&this.el.addClass(this.opts.activeClass),this.el.trigger("activate",r.el)},s.prototype.reset=function(e){if(!this.accept)return;this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),this.el.trigger("deactivate",r.el)},s.prototype.enter=function(e){if(this.opts.disabled)return!1;e.stopPropagation(),this.opts.hoverClass&&this.accept&&this.el.addClass(this.opts.hoverClass)},s.prototype.over=function(e){if(this.opts.disabled)return;e.stopPropagation(),e.originalEvent&&(e=e.originalEvent),e.dataTransfer.dropEffect="copy",this.accept&&e.preventDefault()},s.prototype.leave=function(e){if(this.opts.disabled)return!1;this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass)},s.prototype.drop=function(t){if(this.opts.disabled)return!1;t.stopPropagation();if(!r.el)return;r.el.removeClass("dragging"),t.originalEvent&&(t=t.originalEvent),t.dataTransfer.effectAllowed==="copy"&&(r.el=r.el.clone()),e(this.el).append(r.el.show()),this.el.trigger("receive",{item:r.el}),r.stop()};var o=function(n,r){this.id=t++,this.el=n,this.opts=r;var i;try{i=this.el.find(this.opts.items)[0].tagName}catch(s){i=/^ul|ol$/i.test(this.el.tagName)?"li":"div"}this.placeholder=e("<"+i+' class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.lastEntered=null,this.lastX=this.lastY=this.direction=null,this.connectWith=[];var o=this;if(this.opts.connectWith){var u=e(this.opts.connectWith),a=window;u[0].ownerDocument!==document&&(a=u[0].ownerDocument.defaultView),a.$(this.opts.connectWith).each(function(){var e=a.$(this),t=e.data("sortable");t?t.connectWith.push(o.id):e.one("create",function(e,t){t.connectWith.push(o.id)})})}};o.prototype.create=function(){this.el.on("dragstart",this.opts.items,e.proxy(this.start,this)).on("dragenter",this.opts.items,e.proxy(this.enter,this)).on("dragover",this.opts.items,e.proxy(this.over,this)).on("dragend",this.opts.items,e.proxy(this.end,this)).on("drop",this.opts.items,e.proxy(this.drop,this)).find(this.opts.items).prop("draggable",!0),this.el.on("mouseenter",this.opts.cancel,e.proxy(this.disable,this)).on("mouseleave",this.opts.cancel,e.proxy(this.enable,this)),this.opts.handle&&this.el.on("mouseenter",this.opts.handle,e.proxy(this.enable,this)).on("mouseleave",this.opts.handle,e.proxy(this.disable,this)),r.on("start",e.proxy(this.activate,this));var t=this;setTimeout(function(){t.el.trigger("create",t)})},o.prototype.destroy=function(){this.el.off("dragstart",this.opts.items,this.start).off("dragenter",this.opts.items,this.enter).off("dragover",this.opts.items,this.over).off("dragend",this.opts.items,this.end).off("drop",this.opts.items,this.drop).find(this.opts.items).prop("draggable",!1),this.el.off("mouseenter",this.opts.cancel,this.disable).off("mouseleave",this.opts.cancel,this.enable),this.opts.handle&&this.el.off("mouseenter",this.opts.handle,this.enable).off("mouseleave",this.opts.handle,this.disable)},o.prototype.enable=function(){this.opts.disabled=!1},o.prototype.disable=function(){this.opts.disabled=!0},o.prototype.activate=function(e){this.accept=r.origin.id===this.id||~this.connectWith.indexOf(r.origin.id)},o.prototype.start=function(t){if(this.opts.disabled)return!1;t.stopPropagation(),t.originalEvent.dataTransfer.effectAllowed="move";try{t.originalEvent.dataTransfer.setData("text/plain","42")}catch(t){}r.start(this,e(t.target)).addClass("dragging"),this.index=r.el.index(),this.opts.forcePlaceholderSize&&(this.placeholder.height(r.el.height()),this.placeholder.width(r.el.width())),this.el.trigger("start",{item:r.el})},o.prototype.enter=function(t){t.preventDefault(),t.stopPropagation();if(!this.accept)return;var n=t.currentTarget;if(n===this.placeholder[0])return;this.opts.forcePlaceholderSize&&this.placeholder.height(r.el.height()),t=t.originalEvent;if(this.lastEntered===n){if(!(this.direction==="down"&&(t.clientY<this.lastY||t.clientX<this.lastX)||this.direction==="up"&&(t.clientY>this.lastY||t.clientX>this.lastX)))return;this.lastEntered=null}this.lastEntered=n,this.lastX=t.clientX,this.lastY=t.clientY,r.placeholder=this.placeholder.show(),this.index!==null&&r.el.hide(),this.direction=this.placeholder.index()<e(n).index()?"down":"up",e(n)[this.direction==="down"?"after":"before"](this.placeholder),this.el.trigger("sort",{item:r.el})},o.prototype.over=function(e){if(!this.accept)return;e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e=e.originalEvent),e.dataTransfer.effectAllowed==="copy"&&(e.dataTransfer.dropEffect="copy")},o.prototype.end=function(e){e.stopPropagation(),e.preventDefault();if(!r.el)return;this.el.trigger("beforeStop",{item:r.el}),r.el.removeClass("dragging").show(),r.stop(),this.index=null,this.el.trigger("stop")},o.prototype.drop=function(t){t.stopPropagation(),t.preventDefault();if(!r.el)return;r.el.removeClass("dragging"),t.originalEvent.dataTransfer.effectAllowed==="copy"&&(r.el=r.el.clone()),r.el.insertBefore(this.placeholder).show(),r.placeholder=null;var n=r.el.index();this.index===null?(this.el.trigger("receive",{item:r.el}),this.el.trigger("update",{item:r.el,index:n}),e(this.el.find(this.opts.items).get(n)).prop("draggable",!0)):n!==this.index&&this.el.trigger("update",{item:r.el,index:n}),this.el.trigger("change",{item:r.el}),this.el.trigger("beforeStop",{item:r.el}),r.origin instanceof o&&(r.origin.index=null,r.origin.el.trigger("stop")),r.stop(),this.el.trigger("stop")},o.prototype.toArray=function(t){t||(t={});var n=t.attribute||"id",r=[];return this.el.find(this.opts.items).each(function(){r.push(e(this).prop(n))}),r},e.fn.draggable=u(i,"draggable",{cancel:"input, textarea, button, select, option",connectToSortable:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,scope:"default"}),e.fn.droppable=u(s,"droppable",{accept:"*",activeClass:!1,disabled:!1,hoverClass:!1,initialized:!1,scope:"default"}),e.fn.sortable=u(o,"sortable",{cancel:"input, textarea, button, select, option",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder"})}(window.Zepto||window.jQuery);